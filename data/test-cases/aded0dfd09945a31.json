{"uid":"aded0dfd09945a31","name":"Check YouTube video playback2 (with auth)","fullName":"ftests_youtube.test_play_video#test_youtube_video_playback","historyId":"3eb3b8e6fc8b012156aa17553852050a","time":{"start":1738362804237,"stop":1738362804237,"duration":0},"description":"Test that a video on YouTube can be played with an authenticated session.","descriptionHtml":"<p>Test that a video on YouTube can be played with an authenticated session.</p>\n","status":"broken","statusMessage":"playwright._impl._api_types.Error: storage_state: expected object, got string","statusTrace":"playwright = <playwright._impl._playwright.Playwright object at 0x7f0b85c00f40>\nstorage_state_file = '/tmp/pytest-of-runner/pytest-0/data0/storage_state.json'\n\n    @pytest.fixture(scope=\"function\")\n    def page_with_auth(playwright, storage_state_file):\n        browser = playwright.chromium.launch(\n            headless=True,\n            args=[\"--autoplay-policy=no-user-gesture-required\"]\n        )\n>       context = browser.new_context(storage_state=storage_state_file, locale=\"en-US\")\n\nftests_youtube/test_play_video.py:26: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/playwright/sync_api/_generated.py:14226: in new_context\n    self._sync(\n/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/playwright/_impl/_browser.py:127: in new_context\n    channel = await self._channel.send(\"newContext\", params)\n/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/playwright/_impl/_connection.py:61: in send\n    return await self._connection.wrap_api_call(\n/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/playwright/_impl/_connection.py:482: in wrap_api_call\n    return await cb()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Channel object at 0x7f0b84805d90>\nmethod = 'newContext'\nparams = {'locale': 'en-US', 'storageState': '{\"cookies\": [{\"name\": \"OTZ\", \"value\": \"7934281_52_52_123900_48_436380\", \"domain\":...m\", \"path\": \"/\", \"expires\": 1769896927.852906, \"httpOnly\": true, \"secure\": true, \"sameSite\": \"None\"}], \"origins\": []}'}\nreturn_as_dict = False\n\n    async def inner_send(\n        self, method: str, params: Optional[Dict], return_as_dict: bool\n    ) -> Any:\n        if params is None:\n            params = {}\n        callback = self._connection._send_message_to_server(self._guid, method, params)\n        if self._connection._error:\n            error = self._connection._error\n            self._connection._error = None\n            raise error\n        done, _ = await asyncio.wait(\n            {\n                self._connection._transport.on_error_future,\n                callback.future,\n            },\n            return_when=asyncio.FIRST_COMPLETED,\n        )\n        if not callback.future.done():\n            callback.future.cancel()\n>       result = next(iter(done)).result()\nE       playwright._impl._api_types.Error: storage_state: expected object, got string\n\n/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/playwright/_impl/_connection.py:97: Error","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1738362802078,"stop":1738362802078,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"base_url","time":{"start":1738362802078,"stop":1738362802078,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"pytestconfig","time":{"start":1738362802078,"stop":1738362802079,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"playwright","time":{"start":1738362802079,"stop":1738362802313,"duration":234},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"delete_output_dir","time":{"start":1738362802079,"stop":1738362802079,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"tmp_path_factory","time":{"start":1738362804237,"stop":1738362804237,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"storage_state_file","time":{"start":1738362804237,"stop":1738362804249,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"page_with_auth","time":{"start":1738362804249,"stop":1738362804382,"duration":133},"status":"broken","statusMessage":"playwright._impl._api_types.Error: storage_state: expected object, got string\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/_pytest/fixtures.py\", line 1130, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/_pytest/fixtures.py\", line 902, in call_fixture_func\n    fixture_result = next(generator)\n  File \"/home/runner/work/auto_tests/auto_tests/ftests_youtube/test_play_video.py\", line 26, in page_with_auth\n    context = browser.new_context(storage_state=storage_state_file, locale=\"en-US\")\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/playwright/sync_api/_generated.py\", line 14226, in new_context\n    self._sync(\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/playwright/_impl/_sync_base.py\", line 109, in _sync\n    return task.result()\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/playwright/_impl/_browser.py\", line 127, in new_context\n    channel = await self._channel.send(\"newContext\", params)\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/playwright/_impl/_connection.py\", line 61, in send\n    return await self._connection.wrap_api_call(\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/playwright/_impl/_connection.py\", line 482, in wrap_api_call\n    return await cb()\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/playwright/_impl/_connection.py\", line 97, in inner_send\n    result = next(iter(done)).result()\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"afterStages":[{"name":"playwright::0","time":{"start":1738362809868,"stop":1738362809890,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"parentSuite","value":"YouTube Tests"},{"name":"suite","value":"Video Playback"},{"name":"host","value":"fv-az1982-59"},{"name":"thread","value":"3509-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"ftests_youtube.test_play_video"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"aded0dfd09945a31.json","parameterValues":[]}